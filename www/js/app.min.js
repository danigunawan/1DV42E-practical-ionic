"use strict";var BookingSystem=angular.module("BookingSystem",["ionic","BookingSystem.controllers","BookingSystem.furnituring","BookingSystem.furnituringServices","ngMaterial","ngResource"]);BookingSystem.run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}]),BookingSystem.constant("API_URL","http://192.168.1.4:8080/BookingSystem/api/"),BookingSystem.constant("DEFAULT_MAP_ZOOM",5),BookingSystem.constant("DEFAULT_LATITUDE",59.2792),BookingSystem.constant("DEFAULT_LONGITUDE",15.2361),BookingSystem.config(["$stateProvider","$urlRouterProvider",function(t,n){t.state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.start",{url:"/start",views:{menuContent:{templateUrl:"templates/start.html"}}}).state("app.furnituring-list",{url:"/furnituring-list",views:{menuContent:{templateUrl:"templates/furnituring/furnituring-list.html",controller:"FurnituringListCtrl"}}}).state("app.furnituring-details",{url:"/furnituring-details/:furnituringId",views:{menuContent:{templateUrl:"templates/furnituring/furnituring-details.html",controller:"FurnituringDetailsCtrl"}}}).state("app.furnituring-create",{url:"/furnituring-create",views:{menuContent:{templateUrl:"templates/furnituring/furnituring-create.html",controller:"FurnituringCreateCtrl"}}}),n.otherwise("/app/start")}]),angular.module("BookingSystem.furnituringServices",["ngResource"]).factory("Furnituring",["$resource","API_URL",function(t,n){return t(n+"Furnituring/:furnituringId",{furnituringId:"@furnituringId"})}]).factory("LocationFurnituring",["$resource","API_URL",function(t,n){return t(n+"LocationFurnituring/:locationId",{locationId:"@locationId"},{remove:{url:n+"LocationFurnituring/:locationId/:furnituringId",id:"@id",method:"DELETE",isArray:!1,params:{locationId:"@locationId",furnituringId:"@furnituringId"}},removeForLocation:{url:n+"LocationFurnituring/:locationId",id:"@id",method:"DELETE",isArray:!1,params:{locationId:"@locationId"}},queryForLocation:{url:n+"LocationFurnituring/location/:locationId",id:"@id",method:"GET",isArray:!0,params:{locationId:"@locationId"}},saveForLocation:{url:n+"LocationFurnituring/location",id:"@id",method:"POST",isArray:!0}})}]),angular.module("BookingSystem.controllers",[]).controller("AppCtrl",["$scope","$ionicModal","$timeout",function(t,n,r){t.loginData={},n.fromTemplateUrl("templates/login.html",{scope:t}).then(function(n){t.modal=n}),t.closeLogin=function(){t.modal.hide()},t.login=function(){t.modal.show()},t.doLogin=function(){console.log("Doing login",t.loginData),r(function(){t.closeLogin()},1e3)}}]).controller("PlaylistsCtrl",["$scope",function(t){t.playlists=[{title:"Reggae",id:1},{title:"Chill",id:2},{title:"Dubstep",id:3},{title:"Indie",id:4},{title:"Rap",id:5},{title:"Cowbell",id:6}]}]).controller("PlaylistCtrl",["$scope","$stateParams",function(t,n){}]),angular.module("BookingSystem.furnituring",[]).controller("FurnituringListCtrl",["$rootScope","$scope","$state","Furnituring",function(t,n,r,i){var e=function(){var r=i.query();r.$promise["catch"](function(){t.FlashMessage={type:"error",message:"Möbleringar kunde inte hämtas, var god försök igen."}}),n.furniturings=r};n.$on("$ionicView.enter",function(t,n){e()})}]).controller("FurnituringDetailsCtrl",["$rootScope","$scope","$stateParams","$state","Furnituring",function(t,n,r,i,e){n.editMode=!1,n.furnituringBackup={};var o=function(){var i=e.get({furnituringId:r.furnituringId});i.$promise["catch"](function(){t.FlashMessage={type:"error",message:"Möblering kunde inte hämtas, var god försök igen."}}),n.furnituring=i};n.startEditMode=function(){var t=this;t.isEditMode=!0,t.furnituringBackup=angular.copy(t.furnituring)},n.endEditMode=function(){var t=this;t.isEditMode=!1},n.abortEditMode=function(){var t=this;t.isEditMode=!1,t.furnituring=t.furnituringBackup},n.saveFurnituring=function(){var n=this;e.save({FurnituringId:r.furnituringId,Name:n.furnituring.Name}).$promise.then(function(r){n.endEditMode(),t.FlashMessage={type:"success",message:'Möbleringen "'+n.furnituring.Name+'" sparades med ett lyckat resultat'}})["catch"](function(r){409===r.status?t.FlashMessage={type:"error",message:'Det finns redan en möblering som heter "'+n.furnituring.Name+'". Två möbleringar kan inte heta lika.'}:400!==r.status&&500!==r.status||(t.FlashMessage={type:"error",message:"Ett oväntat fel uppstod när möbleringen skulle sparas"}),404===r.status&&(t.FlashMessage={type:"error",message:'Möbleringen "'+n.furnituring.Name+'" existerar inte längre. Hann kanske någon radera den?'},history.back())})},n.deleteFurnituring=function(){},o()}]).controller("FurnituringCreateCtrl",["$rootScope","$stateParams","$scope","$state","Furnituring",function(t,n,r,i,e){r.furnituring={},r.saveFurnituring=function(){var n=this;e.save({FurnituringId:0,Name:n.furnituring.Name}).$promise.then(function(r){t.FlashMessage={type:"success",message:'Möbleringen "'+n.furnituring.Name+'" skapades med ett lyckat resultat'},history.back()})["catch"](function(r){409===r.status?t.FlashMessage={type:"error",message:'Det finns redan en möblering som heter "'+n.furnituring.Name+'". Två möbleringar kan inte heta lika.'}:t.FlashMessage={type:"error",message:"Ett oväntat fel uppstod när möbleringen skulle sparas"}})}}]);